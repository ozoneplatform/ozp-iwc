var ozpIwc=ozpIwc||{};ozpIwc.Event=function(){this.events={}},ozpIwc.Event.prototype.on=function(a,b,c){var d=b;return c&&(d=function(){b.apply(c,arguments)},d.ozpIwcDelegateFor=b),this.events[a]=this.events[a]||[],this.events[a].push(d),d},ozpIwc.Event.prototype.off=function(a,b){this.events[a]=(this.events[a]||[]).filter(function(a){return a!==b&&a.ozpIwcDelegateFor!==b})},ozpIwc.Event.prototype.trigger=function(a,b){b=b||new ozpIwc.CancelableEvent;var c=this.events[a]||[];return c.forEach(function(a){a(b)}),b},ozpIwc.Event.prototype.mixinOnOff=function(a){var b=this;a.on=function(){return b.on.apply(b,arguments)},a.off=function(){return b.off.apply(b,arguments)}},ozpIwc.CancelableEvent=function(a){a=a||{};for(var b in a)this[b]=a[b];this.canceled=!1,this.cancelReason=null},ozpIwc.CancelableEvent.prototype.cancel=function(a){return a=a||"Unknown",this.canceled=!0,this.cancelReason=a,this},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){function a(a){try{return a.sentinel=0,0===Object.getOwnPropertyDescriptor(a,"sentinel").value}catch(b){}}function b(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}var c,d,e,f,g=Function.prototype.call,h=Object.prototype,i=g.bind(h.hasOwnProperty),j=i(h,"__defineGetter__");if(j&&(c=g.bind(h.__defineGetter__),d=g.bind(h.__defineSetter__),e=g.bind(h.__lookupGetter__),f=g.bind(h.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){var b=a.__proto__;return b||null===b?b:a.constructor?a.constructor.prototype:h}),Object.defineProperty){var k=a({}),l="undefined"==typeof document||a(document.createElement("div"));if(!l||!k)var m=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||m){var n="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(n+a);if(m)try{return m.call(Object,a,b)}catch(c){}if(i(a,b)){var d={enumerable:!0,configurable:!0};if(j){var g=a.__proto__,k=a!==h;k&&(a.__proto__=h);var l=e(a,b),o=f(a,b);if(k&&(a.__proto__=g),l||o)return l&&(d.get=l),o&&(d.set=o),d}return d.value=a[b],d.writable=!0,d}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var o,p=!({__proto__:null}instanceof Object);o=p||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function a(){}var b=document.createElement("iframe"),c=document.body||document.documentElement;b.style.display="none",c.appendChild(b),b.src="javascript:";var d=b.contentWindow.Object.prototype;return c.removeChild(b),b=null,delete d.constructor,delete d.hasOwnProperty,delete d.propertyIsEnumerable,delete d.isPrototypeOf,delete d.toLocaleString,delete d.toString,delete d.valueOf,d.__proto__=null,a.prototype=d,o=function(){return new a},new a},Object.create=function(a,b){function c(){}var d;if(null===a)d=o();else{if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object prototype may only be an Object or null");c.prototype=a,d=new c,d.__proto__=a}return void 0!==b&&Object.defineProperties(d,b),d}}if(Object.defineProperty){var q=b({}),r="undefined"==typeof document||b(document.createElement("div"));if(!q||!r)var s=Object.defineProperty,t=Object.defineProperties}if(!Object.defineProperty||s){var u="Property description must be an object: ",v="Object.defineProperty called on non-object: ",w="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,g){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(v+a);if("object"!=typeof g&&"function"!=typeof g||null===g)throw new TypeError(u+g);if(s)try{return s.call(Object,a,b,g)}catch(i){}if("value"in g)if(j&&(e(a,b)||f(a,b))){var k=a.__proto__;a.__proto__=h,delete a[b],a[b]=g.value,a.__proto__=k}else a[b]=g.value;else{if(!j)throw new TypeError(w);"get"in g&&c(a,b,g.get),"set"in g&&d(a,b,g.set)}return a}}(!Object.defineProperties||t)&&(Object.defineProperties=function(a,b){if(t)try{return t.call(Object,a,b)}catch(c){}for(var d in b)i(b,d)&&"__proto__"!==d&&Object.defineProperty(a,d,b[d]);return a}),Object.seal||(Object.seal=function(a){if(Object(a)!==a)throw new TypeError("Object.seal can only be called on Objects.");return a}),Object.freeze||(Object.freeze=function(a){if(Object(a)!==a)throw new TypeError("Object.freeze can only be called on Objects.");return a});try{Object.freeze(function(){})}catch(x){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){if(Object(a)!==a)throw new TypeError("Object.preventExtensions can only be called on Objects.");return a}),Object.isSealed||(Object.isSealed=function(a){if(Object(a)!==a)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(a){if(Object(a)!==a)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)!==a)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var b="";i(a,b);)b+="?";a[b]=!0;var c=i(a,b);return delete a[b],c})}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){function a(a){var b=+a;return b!==b?b=0:0!==b&&b!==1/0&&b!==-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b))),b}function b(a){var b=typeof a;return null===a||"undefined"===b||"boolean"===b||"number"===b||"string"===b}function c(a){var c,d,e;if(b(a))return a;if(d=a.valueOf,p(d)&&(c=d.call(a),b(c)))return c;if(e=a.toString,p(e)&&(c=e.call(a),b(c)))return c;throw new TypeError}var d,e=Array.prototype,f=Object.prototype,g=Function.prototype,h=String.prototype,i=Number.prototype,j=e.slice,k=e.splice,l=e.push,m=e.unshift,n=g.call,o=f.toString,p=function(a){return"[object Function]"===o.call(a)},q=function(a){return"[object RegExp]"===o.call(a)},r=function(a){return"[object Array]"===o.call(a)},s=function(a){return"[object String]"===o.call(a)},t=function(a){var b=o.call(a),c="[object Arguments]"===b;return c||(c=!r(a)&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&p(a.callee)),c},u=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}();d=u?function(a,b,c,d){!d&&b in a||Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c})}:function(a,b,c,d){!d&&b in a||(a[b]=c)};var v=function(a,b,c){for(var e in b)f.hasOwnProperty.call(b,e)&&d(a,e,b[e],c)},w={ToObject:function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)},ToUint32:function(a){return a>>>0}},x=function(){};v(g,{bind:function(a){var b=this;if(!p(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c,d=j.call(arguments,1),e=function(){if(this instanceof c){var e=b.apply(this,d.concat(j.call(arguments)));return Object(e)===e?e:this}return b.apply(a,d.concat(j.call(arguments)))},f=Math.max(0,b.length-d.length),g=[],h=0;f>h;h++)g.push("$"+h);return c=Function("binder","return function ("+g.join(",")+"){ return binder.apply(this, arguments); }")(e),b.prototype&&(x.prototype=b.prototype,c.prototype=new x,x.prototype=null),c}});var y=n.bind(f.hasOwnProperty),z=function(){var a=[1,2],b=a.splice();return 2===a.length&&r(b)&&0===b.length}();v(e,{splice:function(){return 0===arguments.length?[]:k.apply(this,arguments)}},z);var A=function(){var a={};return e.splice.call(a,0,0,1),1===a.length}();v(e,{splice:function(b,c){if(0===arguments.length)return[];var d=arguments;return this.length=Math.max(a(this.length),0),arguments.length>0&&"number"!=typeof c&&(d=j.call(arguments),d.length<2?d.push(this.length-b):d[1]=a(c)),k.apply(this,d)}},!A);var B=1!==[].unshift(0);v(e,{unshift:function(){return m.apply(this,arguments),this.length}},B),v(Array,{isArray:r});var C=Object("a"),D="a"!==C[0]||!(0 in C),E=function(a){var b=!0,c=!0;return a&&(a.call("foo",function(a,c,d){"object"!=typeof d&&(b=!1)}),a.call([1],function(){"use strict";c="string"==typeof this},"x")),!!a&&b&&c};v(e,{forEach:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if(!p(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}},!E(e.forEach)),v(e,{map:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=c.length>>>0,e=Array(d),f=arguments[1];if(!p(a))throw new TypeError(a+" is not a function");for(var g=0;d>g;g++)g in c&&(e[g]=a.call(f,c[g],g,b));return e}},!E(e.map)),v(e,{filter:function(a){var b,c=w.ToObject(this),d=D&&s(this)?this.split(""):c,e=d.length>>>0,f=[],g=arguments[1];if(!p(a))throw new TypeError(a+" is not a function");for(var h=0;e>h;h++)h in d&&(b=d[h],a.call(g,b,h,c)&&f.push(b));return f}},!E(e.filter)),v(e,{every:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if(!p(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&!a.call(e,c[f],f,b))return!1;return!0}},!E(e.every)),v(e,{some:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=c.length>>>0,e=arguments[1];if(!p(a))throw new TypeError(a+" is not a function");for(var f=0;d>f;f++)if(f in c&&a.call(e,c[f],f,b))return!0;return!1}},!E(e.some));var F=!1;e.reduce&&(F="object"==typeof e.reduce.call("es5",function(a,b,c,d){return d})),v(e,{reduce:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=c.length>>>0;if(!p(a))throw new TypeError(a+" is not a function");if(!d&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}for(;d>f;f++)f in c&&(e=a.call(void 0,e,c[f],f,b));return e}},!F);var G=!1;e.reduceRight&&(G="object"==typeof e.reduceRight.call("es5",function(a,b,c,d){return d})),v(e,{reduceRight:function(a){var b=w.ToObject(this),c=D&&s(this)?this.split(""):b,d=c.length>>>0;if(!p(a))throw new TypeError(a+" is not a function");if(!d&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var e,f=d-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(f in c){e=c[f--];break}if(--f<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>f)return e;do f in c&&(e=a.call(void 0,e,c[f],f,b));while(f--);return e}},!G);var H=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);v(e,{indexOf:function(b){var c=D&&s(this)?this.split(""):w.ToObject(this),d=c.length>>>0;if(!d)return-1;var e=0;for(arguments.length>1&&(e=a(arguments[1])),e=e>=0?e:Math.max(0,d+e);d>e;e++)if(e in c&&c[e]===b)return e;return-1}},H);var I=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);v(e,{lastIndexOf:function(b){var c=D&&s(this)?this.split(""):w.ToObject(this),d=c.length>>>0;if(!d)return-1;var e=d-1;for(arguments.length>1&&(e=Math.min(e,a(arguments[1]))),e=e>=0?e:d-Math.abs(e);e>=0;e--)if(e in c&&b===c[e])return e;return-1}},I);var J=!{toString:null}.propertyIsEnumerable("toString"),K=function(){}.propertyIsEnumerable("prototype"),L=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=L.length;v(Object,{keys:function(a){var b=p(a),c=t(a),d=null!==a&&"object"==typeof a,e=d&&s(a);if(!d&&!b&&!c)throw new TypeError("Object.keys called on a non-object");var f=[],g=K&&b;if(e||c)for(var h=0;h<a.length;++h)f.push(String(h));else for(var i in a)g&&"prototype"===i||!y(a,i)||f.push(String(i));if(J)for(var j=a.constructor,k=j&&j.prototype===a,l=0;M>l;l++){var m=L[l];k&&"constructor"===m||!y(a,m)||f.push(m)}return f}});var N=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),O=Object.keys;v(Object,{keys:function(a){return O(t(a)?e.slice.call(a):a)}},!N);var P=-621987552e5,Q="-000001",R=Date.prototype.toISOString&&-1===new Date(P).toISOString().indexOf(Q);v(Date.prototype,{toISOString:function(){var a,b,c,d,e;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(d=this.getUTCFullYear(),e=this.getUTCMonth(),d+=Math.floor(e/12),e=(e%12+12)%12,a=[e+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],d=(0>d?"-":d>9999?"+":"")+("00000"+Math.abs(d)).slice(d>=0&&9999>=d?-4:-6),b=a.length;b--;)c=a[b],10>c&&(a[b]="0"+c);return d+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},R);var S=!1;try{S=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(P).toJSON().indexOf(Q)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(T){}S||(Date.prototype.toJSON=function(){var a,b=Object(this),d=c(b);if("number"==typeof d&&!isFinite(d))return null;if(a=b.toISOString,"function"!=typeof a)throw new TypeError("toISOString property is not callable");return a.call(b)});var U=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),V=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),W=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(!Date.parse||W||V||!U)&&(Date=function(a){function b(c,d,e,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=1===j&&String(c)===c?new a(b.parse(c)):j>=7?new a(c,d,e,f,g,h,i):j>=6?new a(c,d,e,f,g,h):j>=5?new a(c,d,e,f,g):j>=4?new a(c,d,e,f):j>=3?new a(c,d,e):j>=2?new a(c,d):j>=1?new a(c):new a;return k.constructor=b,k}return a.apply(this,arguments)}function c(a,b){var c=b>1?1:0;return f[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)}function d(b){return Number(new a(1970,0,1,0,0,0,b))}var e=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),f=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var g in a)b[g]=a[g];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function(b){var f=e.exec(b);if(f){var g,h=Number(f[1]),i=Number(f[2]||1)-1,j=Number(f[3]||1)-1,k=Number(f[4]||0),l=Number(f[5]||0),m=Number(f[6]||0),n=Math.floor(1e3*Number(f[7]||0)),o=Boolean(f[4]&&!f[8]),p="-"===f[9]?1:-1,q=Number(f[10]||0),r=Number(f[11]||0);return(l>0||m>0||n>0?24:25)>k&&60>l&&60>m&&1e3>n&&i>-1&&12>i&&24>q&&60>r&&j>-1&&j<c(h,i+1)-c(h,i)&&(g=60*(24*(c(h,i)+j)+k+q*p),g=1e3*(60*(g+l+r*p)+m)+n,o&&(g=d(g)),g>=-864e13&&864e13>=g)?g:0/0}return a.parse.apply(this,arguments)},b}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var X=i.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),Y={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(a,b){for(var c=-1;++c<Y.size;)b+=a*Y.data[c],Y.data[c]=b%Y.base,b=Math.floor(b/Y.base)},divide:function(a){for(var b=Y.size,c=0;--b>=0;)c+=Y.data[b],Y.data[b]=Math.floor(c/a),c=c%a*Y.base},numToString:function(){for(var a=Y.size,b="";--a>=0;)if(""!==b||0===a||0!==Y.data[a]){var c=String(Y.data[a]);""===b?b=c:b+="0000000".slice(0,7-c.length)+c}return b},pow:function ib(a,b,c){return 0===b?c:b%2===1?ib(a,b-1,c*a):ib(a*a,b/2,c)},log:function(a){for(var b=0;a>=4096;)b+=12,a/=4096;for(;a>=2;)b+=1,a/=2;return b}};v(i,{toFixed:function(a){var b,c,d,e,f,g,h,i;if(b=Number(a),b=b!==b?0:Math.floor(b),0>b||b>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(c=Number(this),c!==c)return"NaN";if(-1e21>=c||c>=1e21)return String(c);if(d="",0>c&&(d="-",c=-c),e="0",c>1e-21)if(f=Y.log(c*Y.pow(2,69,1))-69,g=0>f?c*Y.pow(2,-f,1):c/Y.pow(2,f,1),g*=4503599627370496,f=52-f,f>0){for(Y.multiply(0,g),h=b;h>=7;)Y.multiply(1e7,0),h-=7;for(Y.multiply(Y.pow(10,h,1),0),h=f-1;h>=23;)Y.divide(1<<23),h-=23;Y.divide(1<<h),Y.multiply(1,1),Y.divide(2),e=Y.numToString()}else Y.multiply(0,g),Y.multiply(1<<-f,0),e=Y.numToString()+"0.00000000000000000000".slice(2,2+b);return b>0?(i=e.length,e=b>=i?d+"0.0000000000000000000".slice(0,b-i+2)+e:d+e.slice(0,i-b)+"."+e.slice(i-b)):e=d+e,e}},X);var Z=h.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var a="undefined"==typeof/()??/.exec("")[1];h.split=function(b,c){var d=this;if("undefined"==typeof b&&0===c)return[];if("[object RegExp]"!==o.call(b))return Z.call(this,b,c);var e,f,g,h,i=[],j=(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.extended?"x":"")+(b.sticky?"y":""),k=0;for(b=new RegExp(b.source,j+"g"),d+="",a||(e=new RegExp("^"+b.source+"$(?!\\s)",j)),c="undefined"==typeof c?-1>>>0:w.ToUint32(c);(f=b.exec(d))&&(g=f.index+f[0].length,!(g>k&&(i.push(d.slice(k,f.index)),!a&&f.length>1&&f[0].replace(e,function(){for(var a=1;a<arguments.length-2;a++)"undefined"==typeof arguments[a]&&(f[a]=void 0)}),f.length>1&&f.index<d.length&&l.apply(i,f.slice(1)),h=f[0].length,k=g,i.length>=c)));)b.lastIndex===f.index&&b.lastIndex++;return k===d.length?(h||!b.test(""))&&i.push(""):i.push(d.slice(k)),i.length>c?i.slice(0,c):i}}():"0".split(void 0,0).length&&(h.split=function(a,b){return"undefined"==typeof a&&0===b?[]:Z.call(this,a,b)});var $=h.replace,_=function(){var a=[];return"x".replace(/x(.)?/g,function(b,c){a.push(c)}),1===a.length&&"undefined"==typeof a[0]}();_||(h.replace=function(a,b){var c=p(b),d=q(a)&&/\)[*?]/.test(a.source);if(c&&d){var e=function(c){var d=arguments.length,e=a.lastIndex;a.lastIndex=0;var f=a.exec(c)||[];return a.lastIndex=e,f.push(arguments[d-2],arguments[d-1]),b.apply(this,f)};return $.call(this,a,e)}return $.call(this,a,b)});var ab=h.substr,bb="".substr&&"b"!=="0b".substr(-1);v(h,{substr:function(a,b){return ab.call(this,0>a&&(a=this.length+a)<0?0:a,b)}},bb);var cb="	\n\f\r   ᠎             　\u2028\u2029﻿",db="​",eb="["+cb+"]",fb=new RegExp("^"+eb+eb+"*"),gb=new RegExp(eb+eb+"*$"),hb=h.trim&&(cb.trim()||!db.trim());v(h,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(fb,"").replace(gb,"")}},hb),(8!==parseInt(cb+"08")||22!==parseInt(cb+"0x16"))&&(parseInt=function(a){var b=/^0[xX]/;return function(c,d){return c=String(c).trim(),Number(d)||(d=b.test(c)?16:10),a(c,d)}}(parseInt))}),window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}),function(){function a(a,b){B[y]=a,B[y+1]=b,y+=2,2===y&&w()}function b(a){return"function"==typeof a}function c(){return function(){process.nextTick(g)}}function d(){var a=0,b=new A(g),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function e(){var a=new MessageChannel;return a.port1.onmessage=g,function(){a.port2.postMessage(0)}}function f(){return function(){setTimeout(g,1)}}function g(){for(var a=0;y>a;a+=2)B[a](B[a+1]),B[a]=void 0,B[a+1]=void 0;y=0}function h(){}function i(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function j(b,c,d){a(function(a){var b=!1,e=i(d,c,function(d){b||(b=!0,c!==d?l(a,d):n(a,d))},function(c){b||(b=!0,o(a,c))});!b&&e&&(b=!0,o(a,e))},b)}function k(a,b){1===b.a?n(a,b.b):2===a.a?o(a,b.b):p(b,void 0,function(b){l(a,b)},function(b){o(a,b)})}function l(a,c){if(a===c)o(a,new TypeError("You cannot resolve a promise with itself"));else if("function"==typeof c||"object"==typeof c&&null!==c)if(c.constructor===a.constructor)k(a,c);else{var d;try{d=c.then}catch(e){C.error=e,d=C}d===C?o(a,C.error):void 0===d?n(a,c):b(d)?j(a,c,d):n(a,c)}else n(a,c)}function m(a){a.f&&a.f(a.b),q(a)}function n(b,c){void 0===b.a&&(b.b=c,b.a=1,0!==b.e.length&&a(q,b))}function o(b,c){void 0===b.a&&(b.a=2,b.b=c,a(m,b))}function p(b,c,d,e){var f=b.e,g=f.length;b.f=null,f[g]=c,f[g+1]=d,f[g+2]=e,0===g&&b.a&&a(q,b)}function q(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?s(c,d,e,f):e(f);a.e.length=0}}function r(){this.error=null}function s(a,c,d,e){var f,g,h,i,j=b(d);if(j){try{f=d(e)}catch(k){D.error=k,f=D}if(f===D?(i=!0,g=f.error,f=null):h=!0,c===f)return void o(c,new TypeError("A promises callback cannot return that same promise."))}else f=e,h=!0;void 0===c.a&&(j&&h?l(c,f):i?o(c,g):1===a?n(c,f):2===a&&o(c,f))}function t(a,b){try{b(function(b){l(a,b)},function(b){o(a,b)})}catch(c){o(a,c)}}function u(a,b,c,d){this.n=a,this.c=new a(h,d),this.i=c,this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?n(this.c,this.b):(this.length=this.length||0,this.k(),0===this.d&&n(this.c,this.b))):o(this.c,this.p())}function v(a){if(E++,this.b=this.a=void 0,this.e=[],h!==a){if(!b(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof v))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");t(this,a)}}var w,x=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},y=0,z="undefined"!=typeof window?window:{},A=z.MutationObserver||z.WebKitMutationObserver,z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,B=Array(1e3);w="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?c():A?d():z?e():f();var C=new r,D=new r;u.prototype.o=function(a){return x(a)},u.prototype.p=function(){return Error("Array Methods must be provided an Array")},u.prototype.l=function(){this.b=Array(this.length)},u.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&a>d;d++)this.j(c[d],d)},u.prototype.j=function(a,b){var c=this.n;"object"==typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))},u.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?o(d,c):this.b[b]=this.h(c)),0===this.d&&n(d,this.b)},u.prototype.h=function(a){return a},u.prototype.q=function(a,b){var c=this;p(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var E=0;v.all=function(a,b){return new u(this,a,!0,b).c},v.race=function(a,b){function c(a){l(e,a)}function d(a){o(e,a)}var e=new this(h,b);if(!x(a))return o(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;void 0===e.a&&f>g;g++)p(this.resolve(a[g]),void 0,c,d);return e},v.resolve=function(a,b){if(a&&"object"==typeof a&&a.constructor===this)return a;var c=new this(h,b);return l(c,a),c},v.reject=function(a,b){var c=new this(h,b);return o(c,a),c},v.prototype={constructor:v,then:function(b,c){var d=this.a;if(1===d&&!b||2===d&&!c)return this;var e=new this.constructor(h),f=this.b;if(d){var g=arguments[d-1];a(function(){s(d,e,g,f)})}else p(this,e,b,c);return e},"catch":function(a){return this.then(null,a)}};var F={Promise:v,polyfill:function(){var a;a="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self,"Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var c;return new a.Promise(function(a){c=a}),b(c)}()||(a.Promise=v)}};"function"==typeof define&&define.amd?define(function(){return F}):"undefined"!=typeof module&&module.exports?module.exports=F:"undefined"!=typeof this&&(this.ES6Promise=F)}.call(this);var ozpIwc=ozpIwc||{};ozpIwc.util=ozpIwc.util||{},ozpIwc.util.now=function(){return(new Date).getTime()},ozpIwc.util.extend=function(a,b){if(!a||!a.prototype)throw ozpIwc.log.error("Cannot create a new class for ",b," due to invalid baseclass:",a),new Error("Cannot create a new class due to invalid baseClass.  Dependency not loaded first?");return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b},ozpIwc.util.safePostMessage=function(a,b,c){try{var d=b;ozpIwc.util.structuredCloneSupport()||"string"==typeof d||(d=JSON.stringify(b)),a.postMessage(d,c)}catch(e){try{a.postMessage(JSON.stringify(b),c)}catch(e){ozpIwc.util.log("Invalid call to window.postMessage: "+e.message)}}},ozpIwc.util.structuredCloneSupport=function(){if(ozpIwc.util=ozpIwc.util||{},void 0!==ozpIwc.util.structuredCloneSupportCache)return ozpIwc.util.structuredCloneSupportCache;var a="postMessage"in window;try{window.postMessage({toString:function(){a=!1}},"*")}catch(b){}return ozpIwc.util.structuredCloneSupportCache=a,ozpIwc.util.structuredCloneSupportCache},ozpIwc.util.structuredCloneSupport.cache=void 0,ozpIwc.util.clone=function(a){if(!Array.isArray(a)&&"object"!=typeof a)return a;try{return JSON.parse(JSON.stringify(a))}catch(b){ozpIwc.log.log(b)}},ozpIwc.util.parseQueryParams=function(a){a=a||window.location.search;for(var b,c={},d=/\??([^&=]+)=?([^&]*)/g;null!==(b=d.exec(a));)c[b[1]]=decodeURIComponent(b[2]);return c},ozpIwc.util.determineOrigin=function(a){var b=document.createElement("a");b.href=a;var c=b.protocol+"//"+b.hostname;return b.port&&(c+=":"+b.port),c},ozpIwc.util.escapeRegex=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},ozpIwc.util.parseOzpUrl=function(a){var b=/^(?:(?:web\+ozp|ozp):\/\/)?([0-9a-zA-Z](?:[-.\w])*)(\/[^?#]*)(\?[^#]*)?(#.*)?$/.exec(decodeURIComponent(a));if(b){var c={dst:b[1],resource:b[2],action:"get"};return c}return null},ozpIwc.util.isIWCPacket=function(a){return"string"!=typeof a.src||"string"!=typeof a.dst||"number"!=typeof a.ver||"string"!=typeof a.msgId?!1:!0},function(){var a,b,c,d;!function(){var e={},f={};a=function(a,b,c){e[a]={deps:b,callback:c}},d=c=b=function(a){function c(b){if("."!==b.charAt(0))return b;for(var c=b.split("/"),d=a.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d._eak_seen=e,f[a])return f[a];if(f[a]={},!e[a])throw new Error("Could not find module "+a);for(var g,h=e[a],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)k.push("exports"===i[l]?g={}:b(c(i[l])));var n=j.apply(this,k);return f[a]=g||n}}(),a("promise/all",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0===--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),a("promise/asap",["exports"],function(a){"use strict";function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new i(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){j.setTimeout(e,1)}}function e(){for(var a=0;a<k.length;a++){var b=k[a],c=b[0],d=b[1];c(d)}k=[]}function f(a,b){var c=k.push([a,b]);1===c&&g()}var g,h="undefined"!=typeof window?window:{},i=h.MutationObserver||h.WebKitMutationObserver,j="undefined"!=typeof global?global:void 0===this?window:this,k=[];g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():i?c():d(),a.asap=f}),a("promise/config",["exports"],function(a){"use strict";function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),a("promise/polyfill",["./promise","./utils","exports"],function(a,b,c){"use strict";function d(){var a;a="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var b="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),f(b)}();b||(a.Promise=e)}var e=a.Promise,f=b.isFunction;c.polyfill=d}),a("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){if(!v(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof i))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],j(a,this)}function j(a,b){function c(a){o(b,a)}function d(a){q(b,a)}try{a(c,d)}catch(e){d(e)}}function k(a,b,c,d){var e,f,g,h,i=v(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;n(b,e)||(i&&g?o(b,e):h?q(b,f):a===D?o(b,e):a===E&&q(b,e))}function l(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+D]=c,e[f+E]=d}function m(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],k(b,c,d,f);a._subscribers=null}function n(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(u(b)&&(d=b.then,v(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?o(a,d):p(a,d)))},function(b){return c?!0:(c=!0,void q(a,b))}),!0}catch(e){return c?!0:(q(a,e),!0)}return!1}function o(a,b){a===b?p(a,b):n(a,b)||p(a,b)
}function p(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(r,a))}function q(a,b){a._state===B&&(a._state=C,a._detail=b,t.async(s,a))}function r(a){m(a,a._state=D)}function s(a){m(a,a._state=E)}var t=a.config,u=(a.configure,b.objectOrFunction),v=b.isFunction,w=(b.now,c.all),x=d.race,y=e.resolve,z=f.reject,A=g.asap;t.async=A;var B=void 0,C=0,D=1,E=2;i.prototype={constructor:i,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;t.async(function(){k(c._state,d,e[c._state-1],c._detail)})}else l(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}},i.all=w,i.race=x,i.resolve=y,i.reject=z,h.Promise=i}),a("promise/race",["./utils","exports"],function(a,b){"use strict";function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),a("promise/reject",["exports"],function(a){"use strict";function b(a){var b=this;return new b(function(b,c){c(a)})}a.reject=b}),a("promise/resolve",["exports"],function(a){"use strict";function b(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=this;return new b(function(b){b(a)})}a.resolve=b}),a("promise/utils",["exports"],function(a){"use strict";function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),b("promise/polyfill").polyfill()}();var ozpIwc=ozpIwc||{};ozpIwc.metricsStats=ozpIwc.metricsStats||{},ozpIwc.metricsStats.DEFAULT_POOL_SIZE=1028,ozpIwc.metricsStats.Sample=function(){this.clear()},ozpIwc.metricsStats.Sample.prototype.update=function(a){this.values.push(a)},ozpIwc.metricsStats.Sample.prototype.clear=function(){this.values=[],this.count=0},ozpIwc.metricsStats.Sample.prototype.size=function(){return this.values.length},ozpIwc.metricsStats.Sample.prototype.getValues=function(){return this.values},ozpIwc.metricsStats.UniformSample=ozpIwc.util.extend(ozpIwc.metricsStats.Sample,function(a){ozpIwc.metricsStats.Sample.apply(this),this.limit=a||ozpIwc.metricsStats.DEFAULT_POOL_SIZE}),ozpIwc.metricsStats.UniformSample.prototype.update=function(a){if(this.count++,this.size()<this.limit)this.values.push(a);else{var b=parseInt(Math.random()*this.count);b<this.limit&&(this.values[b]=a)}};var ozpIwc=ozpIwc||{};ozpIwc.metricsStats=ozpIwc.metricsStats||{},ozpIwc.metricsStats.BinaryHeap=function(a){this.content=[],this.scoreFunction=a},ozpIwc.metricsStats.BinaryHeap.prototype={clone:function(){var a=new ozpIwc.metricsStats.BinaryHeap(this.scoreFunction);return a.content=JSON.parse(JSON.stringify(this.content)),a},push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},peek:function(){return this.content[0]},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},remove:function(a){for(var b=this.content.length,c=0;b>c;c++)if(this.content[c]===a){var d=this.content.pop();return c!==b-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.bubbleUp(c):this.sinkDown(c)),!0}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];a>0;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=null,h=null;if(b>f){var i=this.content[f];h=this.scoreFunction(i),d>h&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(null===g?d:h)>k&&(g=e)}if(null===g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}}};var ozpIwc=ozpIwc||{};ozpIwc.metricsStats=ozpIwc.metricsStats||{},ozpIwc.metricsStats.DEFAULT_RESCALE_THRESHOLD=36e5,ozpIwc.metricsStats.DEFAULT_DECAY_ALPHA=.015,ozpIwc.metricsStats.ExponentiallyDecayingSample=ozpIwc.util.extend(ozpIwc.metricsStats.Sample,function(a,b){ozpIwc.metricsStats.Sample.apply(this),this.limit=a||ozpIwc.metricsStats.DEFAULT_POOL_SIZE,this.alpha=b||ozpIwc.metricsStats.DEFAULT_DECAY_ALPHA,this.rescaleThreshold=ozpIwc.metricsStats.DEFAULT_RESCALE_THRESHOLD}),ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.getValues=function(){for(var a,b=[],c=this.values.clone();void 0!==(a=c.pop());)b.push(a.val);return b},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.size=function(){return this.values.size()},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.newHeap=function(){return new ozpIwc.metricsStats.BinaryHeap(function(a){return a.priority})},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.now=function(){return ozpIwc.util.now()},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.tick=function(){return this.now()/1e3},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.clear=function(){this.values=this.newHeap(),this.count=0,this.startTime=this.tick(),this.nextScaleTime=this.now()+this.rescaleThreshold},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.update=function(a,b){void 0===b?b=this.tick():b/=1e3;var c=this.weight(b-this.startTime)/Math.random(),d={val:a,priority:c};if(this.count<this.limit)this.count+=1,this.values.push(d);else{var e=this.values.peek();e.priority<c&&(this.values.push(d),this.values.pop())}this.now()>this.nextScaleTime&&this.rescale()},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.weight=function(a){return Math.exp(this.alpha*a)},ozpIwc.metricsStats.ExponentiallyDecayingSample.prototype.rescale=function(){this.nextScaleTime=this.now()+this.rescaleThreshold;var a=this.values.content,b=[],c=this.startTime;this.startTime=this.tick();for(var d=0;d<a.length;d++)b.push({val:a[d].val,priority:a[d].priority*Math.exp(-this.alpha*(this.startTime-c))});this.values.content=b};var ozpIwc=ozpIwc||{};ozpIwc.metricsStats=ozpIwc.metricsStats||{},ozpIwc.metricsStats.M1_ALPHA=1-Math.exp(-5/60),ozpIwc.metricsStats.M5_ALPHA=1-Math.exp(-5/60/5),ozpIwc.metricsStats.M15_ALPHA=1-Math.exp(-5/60/15),ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage=function(a,b){this.alpha=a,this.interval=b||5e3,this.currentRate=null,this.uncounted=0,this.lastTick=ozpIwc.util.now()},ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage.prototype.update=function(a){this.uncounted+=a||1,this.tick()},ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage.prototype.tick=function(){var a=ozpIwc.util.now(),b=a-this.lastTick;if(b>this.interval){this.lastTick=a-b%this.interval;for(var c=Math.floor(b/this.interval),d=0;c>d;++d){var e=this.uncounted/this.interval;this.uncounted=0,null!==this.currentRate?this.currentRate+=this.alpha*(e-this.currentRate):this.currentRate=e}}},ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage.prototype.rate=function(){return 1e3*this.currentRate};var ozpIwc=ozpIwc||{};ozpIwc.metricTypes=ozpIwc.metricTypes||{},ozpIwc.metricTypes.BaseMetric=function(){this.value=0,this.name="",this.unitName=""},ozpIwc.metricTypes.BaseMetric.prototype.get=function(){return this.value},ozpIwc.metricTypes.BaseMetric.prototype.unit=function(a){return a?(this.unitName=a,this):this.unitName},ozpIwc.metricTypes.Counter=ozpIwc.util.extend(ozpIwc.metricTypes.BaseMetric,function(){ozpIwc.metricTypes.BaseMetric.apply(this,arguments),this.value=0}),ozpIwc.metricTypes.Counter.prototype.inc=function(a){return this.value+=a?a:1},ozpIwc.metricTypes.Counter.prototype.dec=function(a){return this.value-=a?a:1},ozpIwc.metricTypes=ozpIwc.metricTypes||{},ozpIwc.metricTypes.Gauge=ozpIwc.util.extend(ozpIwc.metricTypes.BaseMetric,function(a){ozpIwc.metricTypes.BaseMetric.apply(this,arguments),this.callback=a}),ozpIwc.metricTypes.Gauge.prototype.set=function(a){return this.callback=a,this},ozpIwc.metricTypes.Gauge.prototype.get=function(){return this.callback?this.callback():void 0},ozpIwc.metricTypes.Histogram=ozpIwc.util.extend(ozpIwc.metricTypes.BaseMetric,function(){ozpIwc.metricTypes.BaseMetric.apply(this,arguments),this.sample=new ozpIwc.metricsStats.ExponentiallyDecayingSample,this.clear()}),ozpIwc.metricTypes.Histogram.prototype.clear=function(){this.sample.clear(),this.min=this.max=null,this.varianceMean=0,this.varianceM2=0,this.sum=0,this.count=0},ozpIwc.metricTypes.Histogram.prototype.mark=function(a,b){b=b||ozpIwc.util.now(),this.sample.update(a,b),this.max=null===this.max?a:Math.max(this.max,a),this.min=null===this.min?a:Math.min(this.min,a),this.sum+=a,this.count++;var c=a-this.varianceMean;return this.varianceMean+=c/this.count,this.varianceM2+=c*(a-this.varianceMean),this.count},ozpIwc.metricTypes.Histogram.prototype.get=function(){var a=this.sample.getValues().map(function(a){return parseFloat(a)}).sort(function(a,b){return a-b}),b=function(b){var c=b*a.length;if(c>=a.length)return a[a.length-1];c=Math.max(0,c),c=Math.min(c,a.length+1);var d=a[Math.floor(c)-1],e=a[Math.floor(c)];return d+(c-Math.floor(c))*(e-d)};return{percentile10:b(.1),percentile25:b(.25),median:b(.5),percentile75:b(.75),percentile90:b(.9),percentile95:b(.95),percentile99:b(.99),percentile999:b(.999),variance:this.count<1?null:this.varianceM2/(this.count-1),mean:0===this.count?null:this.varianceMean,stdDev:this.count<1?null:Math.sqrt(this.varianceM2/(this.count-1)),count:this.count,sum:this.sum,max:this.max,min:this.min}},ozpIwc.metricTypes.Meter=ozpIwc.util.extend(ozpIwc.metricTypes.BaseMetric,function(){ozpIwc.metricTypes.BaseMetric.apply(this,arguments),this.m1Rate=new ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage(ozpIwc.metricsStats.M1_ALPHA),this.m5Rate=new ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage(ozpIwc.metricsStats.M5_ALPHA),this.m15Rate=new ozpIwc.metricsStats.ExponentiallyWeightedMovingAverage(ozpIwc.metricsStats.M15_ALPHA),this.startTime=ozpIwc.util.now(),this.value=0}),ozpIwc.metricTypes.Meter.prototype.mark=function(a){return a=a||1,this.value+=a,this.m1Rate.update(a),this.m5Rate.update(a),this.m15Rate.update(a),this.value},ozpIwc.metricTypes.Meter.prototype.get=function(){return{rate1m:this.m1Rate.rate(),rate5m:this.m5Rate.rate(),rate15m:this.m15Rate.rate(),rateMean:this.value/(ozpIwc.util.now()-this.startTime)*1e3,count:this.value}},ozpIwc.metricTypes.Meter.prototype.tick=function(){this.m1Rate.tick(),this.m5Rate.tick(),this.m15Rate.tick()},ozpIwc.metricTypes.Timer=ozpIwc.util.extend(ozpIwc.metricTypes.BaseMetric,function(){ozpIwc.metricTypes.BaseMetric.apply(this,arguments),this.meter=new ozpIwc.metricTypes.Meter,this.histogram=new ozpIwc.metricTypes.Histogram}),ozpIwc.metricTypes.Timer.prototype.mark=function(a,b){this.meter.mark(),this.histogram.mark(a,b)},ozpIwc.metricTypes.Timer.prototype.start=function(){var a=this,b=ozpIwc.util.now();return function(){var c=ozpIwc.util.now();a.mark(c-b,c)}},ozpIwc.metricTypes.Timer.prototype.time=function(a){var b=ozpIwc.util.now();try{a()}finally{var c=ozpIwc.util.now();this.mark(c-b,c)}},ozpIwc.metricTypes.Timer.prototype.get=function(){var a=this.histogram.get(),b=this.meter.get();for(var c in b)a[c]=b[c];return a};var ozpIwc=ozpIwc||{};ozpIwc.MetricsRegistry=function(){this.metrics={};var a=this;this.gauge("registry.metrics.types").set(function(){return Object.keys(a.metrics).length})},ozpIwc.MetricsRegistry.prototype.findOrCreateMetric=function(a,b){var c=this.metrics[a];return c?c instanceof b?c:null:(c=this.metrics[a]=new b,c.name=a,c)},ozpIwc.MetricsRegistry.prototype.makeName=function(a){return Array.prototype.slice.call(a).join(".")},ozpIwc.MetricsRegistry.prototype.counter=function(){return this.findOrCreateMetric(this.makeName(arguments),ozpIwc.metricTypes.Counter)},ozpIwc.MetricsRegistry.prototype.meter=function(){return this.findOrCreateMetric(this.makeName(arguments),ozpIwc.metricTypes.Meter)},ozpIwc.MetricsRegistry.prototype.gauge=function(){return this.findOrCreateMetric(this.makeName(arguments),ozpIwc.metricTypes.Gauge)},ozpIwc.MetricsRegistry.prototype.histogram=function(){return this.findOrCreateMetric(this.makeName(arguments),ozpIwc.metricTypes.Histogram)},ozpIwc.MetricsRegistry.prototype.timer=function(){return this.findOrCreateMetric(this.makeName(arguments),ozpIwc.metricTypes.Timer)},ozpIwc.MetricsRegistry.prototype.register=function(a,b){return this.metrics[this.makeName(a)]=b,b},ozpIwc.MetricsRegistry.prototype.toJson=function(){var a={};for(var b in this.metrics){for(var c=b.split("."),d=a;c.length>1;){var e=c.shift();d=d[e]=d[e]||{}}d[c[0]]=this.metrics[b].get()}return a},ozpIwc.MetricsRegistry.prototype.allMetrics=function(){var a=[];for(var b in this.metrics)a.push(this.metrics[b]);return a},ozpIwc.metrics=new ozpIwc.MetricsRegistry;
//# sourceMappingURL=ozpIwc-metrics.min.js.map